/* 移除 var() 变量，直接使用实际颜色值 */

/* --- 消息区域 (最终优化版) --- */
.chat-messages {
	flex-grow: 1;
	padding: 20px;
	overflow-y: auto;
	display: flex;
	flex-direction: column;
	gap: 25px;
	/* 消息之间的垂直距离 */
}

/* --- 滚动条样式 --- */
.chat-messages::-webkit-scrollbar {
	width: 6px;
}

.chat-messages::-webkit-scrollbar-track {
	background: transparent;
}

.chat-messages::-webkit-scrollbar-thumb {
	background-color: #c6c9ff; /* 原 --glow-cyan */
	border-radius: 10px;
}


/* --- 消息外层容器 --- */
.message-wrapper {
	display: flex;
	gap: 10px;
	max-width: 70%;
}

.message-wrapper.received {
	align-self: flex-start;
}

.message-wrapper.sent {
	align-self: flex-end;
}

/* --- 核心修改：使用 CSS Grid 重新布局 --- */
.message-content {
	display: grid;
	/* 定义网格区域：用户名(sender)和时间戳(timestamp)在第一行，消息气泡(bubble)在第二行 */
	grid-template-areas:
		"sender timestamp"
		"bubble bubble";
	grid-template-columns: auto 1fr;
	/* 用户名自动宽度，时间戳占满剩余空间 */
	row-gap: 8px;
	/* 上下两行（用户信息和气泡）的间距 */
}

/* --- 用户名样式 --- */
.message-sender {
	grid-area: sender;
	font-size: 13px;
	color: #ccc;
	/* 实现用户名过长时显示省略号 (...) */
	white-space: nowrap;
	overflow: hidden;
	text-overflow: ellipsis;
	max-width: 200px;
	/* 可根据需要调整用户名的最大宽度 */
}

/* --- 时间戳样式 --- */
.message-timestamp {
	grid-area: timestamp;
	font-size: 12px;
	color: #777;
	align-self: center;
	/* 垂直居中 */
	padding-left: 10px;
	/* 与用户名拉开一点距离 */
}

/* 
* ======================================================
*  关键修正：这里是您想要的“文本框”/“气泡”的核心样式 
* ======================================================
*/
.message-bubble {
	grid-area: bubble;
	padding: 8px 16px;
	/* 内边距，让文字和边框有距离 */
	border-radius: 20px;
	/* 圆角大小 */
	font-size: 15px;
	/* 消息文字大小 */
	line-height: 1.5;
	/* 行高，阅读更舒适 */
	width: fit-content;
	max-width: 340px;
	/* 宽度自适应内容 */
}


/* --- 接收消息的文本框样式 --- */
.message-wrapper.received .message-bubble {
	background-color: #141e28;
	border: 2px solid #1a373c;
	/* 一个比纯黑稍亮的深灰色，形成对比 */
	color: #e0e0e0;
	font-size: 18px;
	/* 柔和的白色文字 */
	border-top-left-radius: 5px;
	/* 做出“小三角”的视觉效果 */
	justify-self: start;
	/* 气泡本身在网格区域内靠左 */
}

/* --- 发送消息的文本框样式 (保留发光效果) --- */
.message-wrapper.sent .message-bubble {
	background-color: #00ff9c; /* 原 --glow-green */
	color: #06110c;
	font-size: 18px;
	/* 在亮绿色背景上使用深色文字，对比更清晰 */
	border-top-right-radius: 5px;
	box-shadow: 0 0 8px #00ff9c, 0 0 5px rgba(0, 255, 156, 0.7); /* 替换 --glow-green */
	justify-self: end;
	/* 气泡本身在网格区域内靠右 */
}

/* --- 调整发送方消息的整体对齐 --- */
.message-wrapper.sent .message-content {
	align-items: end;
	/* 让网格内的元素（用户名、时间）也靠右对齐 */
}

.message-wrapper.sent .message-timestamp {
	text-align: right;
}